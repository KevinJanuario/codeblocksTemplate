parameters:
  - name: buildType
    default: ''
 
steps:
- script: |
    docker pull yamandevops/debian:9 
    docker run -d --name $(Build.Repository.Name) -v $(Build.SourcesDirectory):/opt/app -it docker.io/yamandevops/debian:9 /bin/bash
    docker exec $(Build.Repository.Name) bash -c "cd /opt/app/Trunk/C-Fontes/ptptrpro && make -f Makefile.FreeImage all"
    # cd /opt/app/Trunk/C-Fontes/ptptrpro
    # make -f Makefile.FreeImage all
    docker rm -f $(Build.Repository.Name)
 
  displayName: 'Execute Script inside Container'
  condition: succeeded()
  continueOnError: false
 
- task: PublishBuildArtifacts@1
  displayName: "Publish image debian 9"
  condition: succeededOrFailed()
  inputs:
    PathtoPublish: "$(Build.ArtifactStagingDirectory)/debian-9"
    ArtifactName: "debian-9"
    publishLocation: "Container"