---
parameters:
  - name: buildType
    default: ''
    
steps:
- script: |
    docker pull yamandevops/debian:8

    docker run --name debian-9 yamandevops/debian:9

    docker exec -it debian-9 /bin/bash
    
    $projectPath = "$(Build.SourcesDirectory)\Trunk\C-Fontes\"
    Write-Host "$projectPath"

    cd $projectPath 

    make

  displayName: 'Run Docker container'
  condition: succeeded()
  continueOnError: false

- task: PublishBuildArtifacts@1
    displayName: "Publish image debian 9"
    condition: succeededOrFailed()
    inputs:
        PathtoPublish: "$(Build.ArtifactStagingDirectory)/debian-9"
        ArtifactName: "debian-9"
        publishLocation: "Container"
